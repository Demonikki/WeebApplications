<!DOCTYPE html>
<html>
<head>
	<title>Soundboard Part 1a</title>
	<meta charset="UTF-8">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<link rel="stylesheet" href="vanilla.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<main>
    <nav class="navbar navbar-default" id = "navB">
			<div class="container">
				<div class="navbar-header">
					<a href="#" class="navbar-brand">Soundboard</a>
				</div>
				<ul class="nav navbar-nav">
					<div class = "dropdown">
						<li><a href="#" id = "theme">Theme</a></li>
						<div class="dropdown-content">
							<a href='#' onclick="changeTheme('dark');">Dark</a>
							<a href='#' onclick="changeTheme('light');">Light</a>
							<a href='#' onclick="changeTheme('anime');">Hello Kitty!</a>
						</div>
					</div>
				</ul>

				<ul class="nav navbar-nav navbar-right">
					<li><a href="#" id = "compact" onClick = "compactView();">Compact View</a></li>
					<li><a href="#" id = "list1">List1</a></li>
					<li><a href="#" id = "list2">List2</a></li>
				</ul>

			</div>
		</nav>

		<template id= "myTemplt" >
					<div id = "col" class="col-lg-3 col-sm-6 pic" >
							<img class = "soImg" id = 'image'>
								<img id = "btn" class = "pBtn"></img>
							</img>

							<audio id="clip">
								<source type="audio/mp3">
							</audio>
					</div>
		</template>
    <!-- <img id = "test" ></img> -->
  </main>
	<script>
  var metaData =[];

	$(document).ready(function() {
      $.getJSON('https://firebasestorage.googleapis.com/v0/b/weeb-applications.appspot.com/o/load_config.json?alt=media&token=0fc08737-b67b-4d67-ab05-54b8efb03313', function(responseText){
        $.each(responseText, function(key, val){
          $.each(val, function(i, result){
              metaData.push(result);
          });
        });
        renderSoundBoard(0);
      });
	});

	$('#list1').click(function() {
			renderSoundBoard(0);
	});

	$('#list2').click(function() {
			renderSoundBoard(1);
	});

	$('.soImg').click(function() {
			alert(1);
		  var audio_element = $(this).parent().siblings("clip");
			if (audio_element.canPlayType){
				 audio_element.play();
			}
	});

  function renderSoundBoard(list){
    var imgs = metaData[0];
    var sounds = metaData[1];

		var img = imgs[list];
		var sound = sounds[list];

    for(var i = 0; i < 12; i++){
      var myTemplate = $('#myTemplt').html().trim();
      var myTemplateClone = $(myTemplate);
			myTemplateClone.find('.soImg').attr('src',img[i]);
      myTemplateClone.find('audio').attr('src', sound[i]);
      myTemplateClone.find('#btn').attr('src',"./media/playBtn.png");
      myTemplateClone.clone().appendTo('body');

			myTemplateClone.find('#btn').hover(function(){
          $(this).attr("src", "./media/pBtn2.jpg");
      });
      myTemplateClone.find('#btn').mouseleave(function(){
          $(this).attr("src", "./media/playBtn.png");
      });
    }
	}
	
	// function playSound(e) {
	// 	sound = e.target.parentNode.querySelector('audio');
	// 	if (sound.paused) {
	// 		sound.play();
	// 		e.target.src = "./media/pauseBtn.png";
	// 		e.target.style.opacity = "0.5";
	// 	} else {
	// 		sound.pause();
	// 		e.target.src = "./media/playBtn.png";
	// 		e.target.style.opacity = "1";
	// 	}
	// 	sound.onended = function () {
	// 		e.target.src = "./media/playBtn.png";
	// 		e.target.style.opacity = "1";
	// 	}
	// }

 	</script>
	<script>
	  document.getElementById("navB").style.backgroundColor = "#191414";
		document.body.style.backgroundImage = "url('http://designwoop.com/uploads/2012/03/01_free_subtle_textures_apple_ios_linen_texture.jpg')";
		function changeTheme(){
			var ele = document.getElementById("myTheme");
			var theme = ele.options[ele.selectedIndex].value;
			if (theme === "light") {
				document.getElementById("navB").style.backgroundImage = "";
				document.body.style.backgroundImage = "url('./media/b14.jpg')";
				document.getElementsByTagName("link")[0].href = "light.css";
			} else if (theme === "anime"){
				document.body.style.backgroundImage = "url('./media/b16.jpg')";
				document.getElementById("navB").style.backgroundImage = "url('./media/navbar.jpg')";
				document.getElementById("navB").style.backgroundSize = "contain";
				document.getElementsByTagName("link")[0].href = "anime.css";
			} else {
				document.getElementById("navB").style.backgroundImage = "";
				document.getElementById("navB").style.backgroundColor = "#191414";
				document.body.style.backgroundImage = "url('http://designwoop.com/uploads/2012/03/01_free_subtle_textures_apple_ios_linen_texture.jpg')";
				document.getElementsByTagName("link")[0].href = "vanilla.css";
			}

		}
	</script>

  <script>
	  	document.getElementById("navB").style.backgroundColor = "#191414";
		document.body.style.backgroundImage = "url('http://designwoop.com/uploads/2012/03/01_free_subtle_textures_apple_ios_linen_texture.jpg')";
		var preColor;
		function changeTheme(theme){
			// var ele = document.getElementById("myTheme");
			// var theme = ele.options[ele.selectedIndex].value;
			if (theme === "light") {
				document.getElementById("navB").style.backgroundImage = "";
				document.body.style.backgroundImage = "url('./media/b14.jpg')";
				document.getElementsByTagName("link")[0].href = "light.css";
				document.getElementById("compact").innerHTML = "Compact View";
				compactView.checkedValue = true;
				preColor = "rgb(120,120,120)";
			} else if (theme === "anime"){
				document.body.style.backgroundImage = "url('./media/b16.jpg')";
				document.body.style.backgroundSize = "100%";
				document.body.style.backgroundAttachment = "fixed";
				document.getElementById("navB").style.backgroundImage = "url('./media/navbar.jpg')";
				document.getElementById("navB").style.backgroundSize = "contain";
				document.getElementsByTagName("link")[0].href = "anime.css";
				document.getElementById("compact").innerHTML = "Compact View";
				compactView.checkedValue = true;
				preColor = "url('./media/navbar.jpg')";
				animeMode = true;
			} else {
				document.getElementById("navB").style.backgroundImage = "";
				document.getElementById("navB").style.backgroundColor = "#191414";
				document.body.style.backgroundImage = "url('http://designwoop.com/uploads/2012/03/01_free_subtle_textures_apple_ios_linen_texture.jpg')";
				document.getElementsByTagName("link")[0].href = "vanilla.css";
				preColor = document.getElementById("navB").style.backgroundColor;
				compactView.checkedValue = true;
				document.getElementById("compact").innerHTML = "Compact View";
			}

		}

		function compactView() {
			if(compactView.checkedValue == undefined) {
				compactView.checkedValue = true; //first call
				console.log("first call");
			}

			if(compactView.checkedValue == true) {
				compactView.oldColor = preColor;
				compactView.oldBG = document.body.style.backgroundImage;
				compactView.oldCSS = document.getElementsByTagName("link")[0].href;
				console.log(compactView.oldCSS);
				document.getElementById("navB").style.backgroundColor = compactView.oldColor;
				document.getElementsByTagName("link")[0].href = "compact.css";
				document.body.style.backgroundSize = "cover";
				document.getElementById("compact").innerHTML = "Regular View";
				compactView.checkedValue = false;
			}
			else if(compactView.checkedValue == false) {
				document.body.style.backgroundSize = "auto";
				document.getElementsByTagName("link")[0].href = compactView.oldCSS;
				compactView.checkedValue = true;
				document.getElementById("navB").style.backgroundColor = compactView.oldColor;
				document.body.style.backgroundImage = compactView.oldBG;
				document.getElementById("compact").innerHTML = "Compact View";
			}
		}
	</script>

	<footer>
	  <!-- <div id="bottom_nav" class="navbar">
			<a href="#home">Home</a>
			<a href="#news">News</a>
			<a href="#contact">Contact</a>
			<a href="#about">About</a> -->
		Copyright info
		Soundtracks taken from "https://ccrma.stanford.edu/~jos/pasp/Sound_Examples.html"
		</div>
	</footer>
</body>
</html>
