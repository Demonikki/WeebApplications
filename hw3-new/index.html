<!DOCTYPE html>
<html>
<head>
	<title>Soundboard Part 1a</title>
	<meta charset="UTF-8">
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
	<link rel="stylesheet" href="vanilla.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<main>
		<nav class="navbar navbar-default" id = "navB">
			<div class="container">
				<div class="navbar-header">
					<a href="#" class="navbar-brand">Soundboard</a>
				</div>
				<ul class="nav navbar-nav">
					<li><a href="#" id = "theme">Theme</a></li>
					<select id = "myTheme" onChange="changeTheme()">
						<option value= "black">black</option>
						<option value="blue">blue</option>
						<option value="purple">purple</option>
					</select>


				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#" id = "compact" onClick = "compactView();">Compact View</a></li>
				</ul>
			</div>
		</nav>
		
		<template id= "myTemplt" >
					<div id = "col" class="col-lg-3 col-sm-6 pic" >
							<img class = "soImg">
								<img id = "btn" class = "pBtn" onclick="playSound(event)"></img>
							</img>

							<audio id="clip">
								<source type="audio/mp3">
							</audio>
					</div>
		</template>
	</main>
	<script>
		function supportsTemplate() {
			return 'content' in document.createElement('template');
		}

		window.onload = function () {
			if (supportsTemplate()) {
				renderSoundBoard();
			} else {
			}
		}
		
		function renderSoundBoard(){
			var xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function() {
				if (xmlhttp.readyState == XMLHttpRequest.DONE ) {
					if (xmlhttp.status == 200) {

						var template = document.querySelector('#myTemplt');
						var soundCells = JSON.parse(xmlhttp.responseText);
						var imgs = soundCells.img;
						var btns = soundCells.btn;
						
						for(var i = 0; i < 12; i++){
							template.content.querySelectorAll('img')[0].src = imgs[i];
							template.content.querySelectorAll('img')[1].src = btns[0];
							template.content.querySelectorAll('source')[0].src = soundCells.sound[i];
							var clone = document.importNode(template.content, true);
							template.parentNode.appendChild(clone);
						}
					}
					else if (xmlhttp.status == 400) {
						alert('There was an error 400');
					}
					else {
						alert('something else other than 200 was returned');
					}
				}
			}
			xmlhttp.open("GET", "./SoundBoard_Data.json", true);
			xmlhttp.send();
		}
		
		function playSound(e) {
			sound = e.target.parentNode.querySelector('audio');

			if (sound.paused) {
				sound.play();
				e.target.src = "./media/pauseBtn.png";
				e.target.style.opacity = "0.5";
			} else {
				sound.pause();
				e.target.src = "./media/playBtn.png";
				e.target.style.opacity = "1";
			}
			sound.onended = function () {
				e.target.src = "./media/playBtn.png";
				e.target.style.opacity = "1";
			}
		}
 	</script>
	<script>
	  	document.getElementById("navB").style.backgroundColor = "#191414";
		document.body.style.backgroundImage = "url('http://designwoop.com/uploads/2012/03/01_free_subtle_textures_apple_ios_linen_texture.jpg')";
		function changeTheme(){
			var ele = document.getElementById("myTheme");
			var theme = ele.options[ele.selectedIndex].value;
			if (theme === "blue") {
				document.body.style.backgroundImage = "url('./media/b13.jpg')";
				document.getElementById("navB").style.backgroundImage = "url('./media/nav0.jpg')";
			} else if (theme === "purple"){
				document.body.style.backgroundImage = "url('./media/b5.jpg')";
				document.getElementById("navB").style.backgroundImage = "url('./media/b2.jpg')";
			} else {
				document.getElementById("navB").style.backgroundImage = "";
				document.getElementById("navB").style.backgroundColor = "#191414";
				document.body.style.backgroundImage = "url('http://designwoop.com/uploads/2012/03/01_free_subtle_textures_apple_ios_linen_texture.jpg')";
			}

		}
	</script>

	<script>
		function compactView() {
			if(compactView.checkedValue == undefined) {
				compactView.checkedValue = true; //first call
				console.log("first call");
			}

			if(compactView.checkedValue == true) {
				compactView.oldColor = document.getElementById("navB").style.backgroundColor;
				compactView.oldBG = document.body.style.backgroundImage;

				// document.body.style.backgroundImage = "url('http://cdn.wallpapersafari.com/34/31/3i4PEU.png')";
				document.getElementById("navB").style.backgroundColor = "rgb(120,120,120)";
				document.getElementsByTagName("link")[0].href = "compact.css";
				document.body.style.backgroundSize = "cover";
				document.getElementById("compact").innerHTML = "Regular View";
				compactView.checkedValue = false;
			}
			else if(compactView.checkedValue == false) {
				document.body.style.backgroundSize = "auto";
				document.getElementsByTagName("link")[0].href = "vanilla.css";
				compactView.checkedValue = true;
				document.getElementById("navB").style.backgroundColor = compactView.oldColor;
				document.body.style.backgroundImage = compactView.oldBG;
				document.getElementById("compact").innerHTML = "Compact View";
			}
		}
	</script>


	<footer>
	  Copyright info
	  Soundtracks taken from "https://ccrma.stanford.edu/~jos/pasp/Sound_Examples.html"
	</footer>
</body>
</html>
