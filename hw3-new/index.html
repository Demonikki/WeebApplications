<!DOCTYPE html>
<html>
<head>
	<title>Soundboard Part 1a</title>
	<meta charset="UTF-8">
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
	<link rel="stylesheet" href="vanilla.css">

	<script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<nav class="navbar navbar-default" id = "navB">
		<div class="container">
			<div class="navbar-header">
				<a href="#" class="navbar-brand">Soundboard</a>
			</div>
			<ul class="nav navbar-nav">
				<li><a href="#">Theme</a></li>
				<select id = "myTheme" onChange="changeTheme()">
					<option value= "black">black</option>
					<option value="blue">blue</option>
					<option value="purple">purple</option>
				</select>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="./login.html">Login</a></li>
				<li><a href="#">
					<img id="settings" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/WMF-Agora-Settings_424242.svg/2000px-WMF-Agora-Settings_424242.svg.png" style="height: 18px; width: auto" alt="settings" />
				</a></li>
			</ul>
		</div>
	</nav>
    
	<template id= "myTemplt" >
				<div id = "col" class="col-lg-3 col-sm-6 pic" >
						<img class = "soImg">
							<img id = "btn" class = "pBtn"></img>
						</img>
						<audio id="clip2">
							<source type="audio/mp3">
						</audio>
				</div>
	</template>

	<script type="text/javascript">
		var xmlhttp = new XMLHttpRequest();

		xmlhttp.onreadystatechange = function() {
			if (xmlhttp.readyState == XMLHttpRequest.DONE ) {
				if (xmlhttp.status == 200) {
					var soundCells = JSON.parse(xmlhttp.responseText);
					var template = document.getElementById("myTemplt");
					
					var imgs = soundCells.img;
					var btns = soundCells.btn;
					
					for(var i = 0; i < 12; i++){
						template.content.querySelectorAll('img')[0].src = imgs[i];
						template.content.querySelectorAll('img')[1].src = btns[0];
						template.content.querySelectorAll('source')[0].src = soundCells.sound[0];
						var clone = document.importNode(template.content, true);
						template.parentNode.appendChild(clone);
					}
				}
				else if (xmlhttp.status == 400) {
					alert('There was an error 400');
				}
				else {
					alert('something else other than 200 was returned');
				}
			}
		};

		xmlhttp.open("GET", "./SoundBoard_Data.json", true);
		xmlhttp.send();
	</script>
	<script>
		var els = document.querySelectorAll('template');
		alert(els.length);
    	for (var i = 0, len = els.length; i < len; i++) {
			els[i].addEventListener('click', function () {
				var sound, icon;
				sound = this.getElementsByTagName('audio')[0];
				icon = this.getElementsByTagName('img')[1];

				if (sound.paused) {
					sound.play();
				} 
				else {
					sound.pause();
				}

				sound.onended = function () {

				}
			}, false)
    	}
	</script>
	<script>
	  document.getElementById("navB").style.backgroundColor = "#191414";
		document.body.style.backgroundImage = "url('http://designwoop.com/uploads/2012/03/01_free_subtle_textures_apple_ios_linen_texture.jpg')";
		function changeTheme(){
			var ele = document.getElementById("myTheme");
			var theme = ele.options[ele.selectedIndex].value;
			if (theme === "blue") {
				document.body.style.backgroundImage = "url('./media/b13.jpg')";
				document.getElementById("navB").style.backgroundImage = "url('./media/nav0.jpg')";
			} else if (theme === "purple"){
				document.body.style.backgroundImage = "url('./media/b5.jpg')";
				document.getElementById("navB").style.backgroundImage = "url('./media/b2.jpg')";
			} else {
				document.getElementById("navB").style.backgroundImage = "";
				document.getElementById("navB").style.backgroundColor = "#191414";
				document.body.style.backgroundImage = "url('http://designwoop.com/uploads/2012/03/01_free_subtle_textures_apple_ios_linen_texture.jpg')";
			}
		}
	</script>

	<footer>
	  Copyright info
	  Soundtracks taken from "https://ccrma.stanford.edu/~jos/pasp/Sound_Examples.html"
	</footer>
</body>
</html>
